<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>IaSQL Blog</title>
        <link>https://blog.iasql.com/</link>
        <description>IaSQL Blog</description>
        <lastBuildDate>Thu, 14 Apr 2022 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[UPDATE iasql SET source = 'open';]]></title>
            <link>https://blog.iasql.com/os-iasql</link>
            <guid>os-iasql</guid>
            <pubDate>Thu, 14 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[We are excited to announce that IaSQL is now open source! The main repository is under https://github.com/iasql/iasql-engine. As perfectionists, we feel like IaSQL will never be truly ready. However, we believe IaSQL is at the point where it can start to be useful for developers managing infrastructure in the cloud. IaSQL is a SaaS that lets you model your infrastructure as data by maintaining a 2-way connection between your AWS account and a Postgres SQL database to represent the definitive state (and status) of your cloud which cannot be achieved with a static infrastructure declaration. This means that when you connect an AWS account to an IaSQL instance it automatically backfills the database with your existing cloud resources. No need to painstakingly redefine or reconcile your existing infrastructure, and IaSQL's module system means you can specify which parts of your cloud infrastructure you wish to control.]]></description>
            <content:encoded><![CDATA[<p>We are excited to announce that <a href="https://iasql.com" target="_blank" rel="noopener noreferrer">IaSQL</a> is now open source! The main repository is under <a href="https://github.com/iasql/iasql-engine" target="_blank" rel="noopener noreferrer">https://github.com/iasql/iasql-engine</a>. As perfectionists, we feel like IaSQL will never be truly ready. However, we believe IaSQL is at the point where it can start to be useful for developers managing infrastructure in the cloud. IaSQL is a SaaS that lets you model your infrastructure as data by maintaining a 2-way connection between your AWS account and a Postgres SQL database to represent the definitive state (and status) of your cloud which cannot be achieved with a static infrastructure declaration. This means that when you connect an AWS account to an IaSQL instance it automatically backfills the database with your existing cloud resources. No need to painstakingly redefine or reconcile your existing infrastructure, and IaSQL's <a href="https://docs.iasql.com/module/" target="_blank" rel="noopener noreferrer">module system</a> means you can specify which parts of your cloud infrastructure you wish to control.</p><img loading="lazy" class="screenshot" src="https://iasql.com/lib_TQbMwqDvYvWhOqVJ/ae7kf13uek0k6mul.gif" alt="drawing" width="400"><p>IaSQL also makes it possible to express infrastructure changes as code that can be version controlled. This can be done with any <a href="https://en.wikipedia.org/wiki/Schema_migration" target="_blank" rel="noopener noreferrer">migration system</a> for schema and data changes, or in a script using <a href="https://www.prisma.io/dataguide/postgresql/inserting-and-modifying-data/insert-on-conflict" target="_blank" rel="noopener noreferrer">idempotent SQL inserts</a> more akin to <a href="https://en.wikipedia.org/wiki/Infrastructure_as_code" target="_blank" rel="noopener noreferrer">IaC</a>.</p><p>PostgreSQL IaSQL databases can be provisioned and configured via our <a href="https://app.iasql.com" target="_blank" rel="noopener noreferrer">dashboard</a>. The dashboard calls the <a href="https://github.com/iasql/iasql-engine" target="_blank" rel="noopener noreferrer">engine</a> which is a Node.js server written in Typescript that provisions unmodified PostgreSQL instances loaded with tables representing AWS services controlled via the <a href="https://www.npmjs.com/package/aws-sdk" target="_blank" rel="noopener noreferrer">AWS SDK</a>. AWS is our main focus at the moment, but we plan to support GCP, Azure and other cloud providers soon. This is an <a href="https://github.com/iasql/iasql-engine#cloud-providers" target="_blank" rel="noopener noreferrer">updated list</a> of the AWS services that we currently support. Let us know if you need a specific AWS service and we should be able prioritize it!</p><img loading="lazy" class="screenshot" src="https://iasql.com/lib_VymYUCjjDarpARbl/87bwoyulswfitjo5.png" alt="drawing" width="1000"><p>We want to make it easier to write IaSQL modules, reduce waiting times when provisioning infrastructure, add more functionality to the existing AWS services, and so on. The list of things we want to build into IaSQL is long, but we want to do it in the open with your feedback and help. Drop us a line on <a href="https://discord.com/invite/machGGczea" target="_blank" rel="noopener noreferrer">Discord</a>!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Introduction to Infrastructure as SQL]]></title>
            <link>https://blog.iasql.com/intro-iasql</link>
            <guid>intro-iasql</guid>
            <pubDate>Tue, 14 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[What software you have deployed on what services and the interactions between them and the outside world is not a program, it is information about your infrastructure. Changing your infrastructure is a set of operations to perform, a program. A SQL database is a set of information and SQL queries read or change that data.]]></description>
            <content:encoded><![CDATA[<p>What software you have deployed on what services and the interactions between them and the outside world is not a program, it is information about your infrastructure. Changing your infrastructure&nbsp;<em>is</em>&nbsp;a set of operations to perform, a program. A SQL database is a set of information and SQL queries read or change that data.</p><p><strong>Infrastructure State is Data, Infrastructure Change is Code. It's as simple as that.</strong></p><p>And manipulating your infrastructure in this way is natural.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">INTO</span><span class="token plain"> aws_ec2 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">ami_id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> ec2_instance_type_id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">SELECT</span><span class="token plain"> ami</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">FROM</span><span class="token plain"> ec2_instance_type </span><span class="token keyword" style="color:rgb(12, 150, 155)">as</span><span class="token plain"> ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">SELECT</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">FROM</span><span class="token plain">   amis</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">WHERE</span><span class="token plain">  image_name </span><span class="token operator" style="color:rgb(12, 150, 155)">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">'amzn-ami-hvm-%'</span><span class="token keyword" style="color:rgb(12, 150, 155)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">BY</span><span class="token plain"> creation_date </span><span class="token keyword" style="color:rgb(12, 150, 155)">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">as</span><span class="token plain"> ami</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">WHERE</span><span class="token plain">  ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">instance_name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">'t2.micro'</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="relations-and-types-matter-for-infrastructure"><strong>Relations and Types Matter for Infrastructure</strong><a class="hash-link" href="#relations-and-types-matter-for-infrastructure" title="Direct link to heading">​</a></h2><p>Infrastructure as Code solutions do not have a good way of encoding dependencies across infrastructure pieces in a micro services architecture which makes it really hard to make and revert changes to infrastructure.</p><p>Representing your infrastructure as SQL resolves the primary issue of YAML-based infrastructure tools by making the relations between pieces of your infrastructure first-class citizens, and enforcing type safety on the data and changes to it.</p><p>You can't set the EC2 instance type as&nbsp;<code>t2.mucro</code>&nbsp;and have your deploy system try and fail to create such an instance. The&nbsp;<code>insert</code>&nbsp;statement will fail and tell you zero rows were inserted and you can quickly see why.</p><p>Similarly, if you have a record in the&nbsp;<code>security_group</code>&nbsp;table, you can't delete it if there are any references to it in the&nbsp;<code>ec2_security_groups</code>&nbsp;join table. The relational structure of IaSQL prevents you from putting your infrastructure into an invalid state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-powers-explore-query-and-automate-your-infrastructure"><strong>New Powers: Explore, Query, and Automate Your Infrastructure</strong><a class="hash-link" href="#new-powers-explore-query-and-automate-your-infrastructure" title="Direct link to heading">​</a></h2><p>Because your infrastructure is presented as a SQL database, you can connect to it with a SQL client of your choice and explore what you have and what the possibilities are.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">tables</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can query for unusual usage patterns.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">SELECT</span><span class="token plain"> aws_ec2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token operator" style="color:rgb(12, 150, 155)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">FROM</span><span class="token plain"> aws_ec2</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">JOIN</span><span class="token plain"> ec2_instance_type </span><span class="token keyword" style="color:rgb(12, 150, 155)">AS</span><span class="token plain"> ait </span><span class="token keyword" style="color:rgb(12, 150, 155)">ON</span><span class="token plain"> ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> aws_ec2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ec2_instance_type_id</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">WHERE</span><span class="token plain"> ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">vcpus </span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">BY</span><span class="token plain"> ait</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">vcpus </span><span class="token keyword" style="color:rgb(12, 150, 155)">DESC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And since it is a database, you can create your own tables with their own meaning and associate them with your infrastructure.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">SELECT</span><span class="token plain"> aws_ec2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token operator" style="color:rgb(12, 150, 155)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">FROM</span><span class="token plain"> aws_ec2</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">JOIN</span><span class="token plain"> company_team_ec2s </span><span class="token keyword" style="color:rgb(12, 150, 155)">AS</span><span class="token plain"> cte </span><span class="token keyword" style="color:rgb(12, 150, 155)">ON</span><span class="token plain"> cte</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">aws_ec2_id </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> aws_ec2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">JOIN</span><span class="token plain"> company_teams </span><span class="token keyword" style="color:rgb(12, 150, 155)">AS</span><span class="token plain"> ct </span><span class="token keyword" style="color:rgb(12, 150, 155)">ON</span><span class="token plain"> ct</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> cte</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">company_team_id</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">WHERE</span><span class="token plain"> ct</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">'Data Engineering'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, your applications can know much more about what infrastructure they need than any auto-scaler solution out there. If you had a very infrequent but CPU/GPU-intensive job you need to handle at an unknown interval, you could give your application access to your IaSQL database and let it temporarily create and then destroy those resources.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> ec2_instance_id </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">iasql</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  INSERT INTO aws_ec2 (ami_id, ec2_instance_type_id)</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  SELECT ami.id, ait.id</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  FROM ec2_instance_type as ait, (</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">      SELECT id</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">      FROM amis</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">      WHERE image_name = 'application-job-runner'</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  ) as ami</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  WHERE ait.instance_name = 'g3.4xlarge'</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  RETURNING id;</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">iasql</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  INSERT INTO ec2_security_groups (ec2_id, security_group_id)</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  SELECT </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token template-string interpolation">ec2_instance_id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token template-string string" style="color:rgb(72, 118, 214)">, sg.id</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  FROM security_groups AS sg</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  WHERE sg.name = 'application-job-group';</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Only large-enough job runners will take it based on job metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> job</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">myMassiveJob</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">iasql</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  DELETE FROM aws_ec2</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)">  WHERE id = </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(153, 76, 195)">${</span><span class="token template-string interpolation">ec2_instance_id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token template-string string" style="color:rgb(72, 118, 214)">;</span><br></span><span class="token-line" style="color:#403f53"><span class="token template-string string" style="color:rgb(72, 118, 214)"></span><span class="token template-string template-punctuation string" style="color:rgb(72, 118, 214)">`</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="you-dont-need-to-learn-a-new-api-probably"><strong>You Don't Need to Learn a New API (Probably)</strong><a class="hash-link" href="#you-dont-need-to-learn-a-new-api-probably" title="Direct link to heading">​</a></h2><p>Nearly all cloud backend systems depend on a database, and most likely a SQL database, so you do not need to learn a new language to manipulate the infrastructure in this way.</p><p>And likely you're using a&nbsp;<a href="https://en.wikipedia.org/wiki/Schema_migration" target="_blank" rel="noopener noreferrer">migration system</a>&nbsp;in your backend to review changes to your database, which you can continue to use here, making it code to be reviewed, just like Infrastructure-as-Code.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="you-can-test-too"><strong>You Can Test, Too</strong><a class="hash-link" href="#you-can-test-too" title="Direct link to heading">​</a></h2><p>Since the safety guarantees are provided by the types and relations between tables, you can simply copy your production infrastructure database into a local database and run your changes/migration against that and verify it works before you run it on your actual Infrastructure-as-SQL database.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="recover-with-ease"><strong>Recover With Ease</strong><a class="hash-link" href="#recover-with-ease" title="Direct link to heading">​</a></h2><p>It's 3AM and your service has gone down. You reverted the most recent IaSQL migration, but that didn't resolve the issue, and you aren't sure which change across which service today caused the outage. So, you simply replace the state of the IaSQL database with a snapshot from yesterday to bring everything back online to a known-good-state, and then take your time after you're well-rested to figure out what actually went wrong.</p>]]></content:encoded>
        </item>
    </channel>
</rss>