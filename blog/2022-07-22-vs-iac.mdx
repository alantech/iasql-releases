---
slug: vs-iac
title: IaSQL vs IaC
authors: [depombo]
---

Infrastructure management tools, specifically Infrastructure as Code (IaC) ones, have trained us to think we can only manipulate a cloud account by applying an infrastructure declaration, or blueprint, to a cloud account. However, applying a blueprint to a cloud account brings about several difficulties when importing and managing cloud infrastructure that exists outside of said declaration.

[IaSQL](https://iasql.com), like IaC tools, allows creating, updating or deleting infrastructure in the cloud. IaSQL does this by using the actual representation of the infrastructure instead of a blueprint. This provides several benefits which we will cover, but primordially it allows developer to model cloud infrastructure in the same way the information in most software systems is represented: as data in a database. This means developers can scale the cloud with a familiar set of developer tools that the Postgres ecosystem has built over many decades, and with one of the most well-known programming languages, SQL.

### Statefiles vs Databases

IaC tools like Terraform and Pulumi automatically create statefiles to reconcile infrastructure that exists in the cloud, but not in the infrastructure declaration. Statefiles don't use human-readable syntax and are hard to inspect or modify, especially at scale. Terraform has gone through great lengths to make it palatable to manipulate these machine generated files using their CLI tool. However, databases were created to replace files when manipulating a large amount of structured information and developer communities have built a lot of tooling around them. IaSQL sets forth a much more natural and battle-tested way to manage infrastructure data.

Some organizations prevent the generation of statefiles when using IaC tools by making cloud dashboards read-only for all employees and only allowing infrastructure changes to occur through the declaration. However, this means every single team in an organization that can span thousands of people and software systems has to adhere to this convention. This can be an untenable premise when workflows span multiple clouds, time zones, deployment strategies, dependencies and versions. Application engineers often need to move quickly and create new infrastructure through a cloud UI that could also depend on infrastructure previously created through an IaC tool. To make matters worse, subsequent changes to the IaC declaration can affect the infrastructure created through the cloud UI as it is only represented in the statefile.

We created the IaSQL `sync` command to let teams create resources outside of IaSQL while still managing said resources. This flexibility makes it possible to have multiple cloud management tools across different teams without getting locked into a single tool. When using IaSQL's `sync`, there is no need to constantly recreate changes or deal with state files to stay up to date with infrastructure changes.

![](../static/img/comparison.jpg)

### Importing existing infrastructure (WIP)

IaSQL automatically imports all existing cloud resources when the initial 2-way binding is setup. 

### Infrastructure drift (WIP)

The fact is that someone is going to access live cloud systems at some point in order to debug or in the case of an emergency. 

IaSQL's automatic import guarantees there is no drift the moment an IaSQL database, which is a Postgres DB with no bells or whistles, is connected to an AWS account.

Drift between the infrastructure representation and what is actually in the cloud is squashed with the `iasql_sync()` [function](https://docs.iasql.com/functions).

### Relations 

IaC tools form DAGs, directed acyclic graphs, under the hood to establish the dependencies between differents parts of the infrastructure in a cloud account. IaSQL sets forth using the relational SQL model to encode relationships between pieces of infrastructure using a syntax that is ergonomic and familiar to most developers.

The infrastructure of a production system can get complex quickly. Infrastructure components can be used by different resources. A change to a cloud resource can have undesired side effects, or outages, in the application layer when the relationships across infrastructure components is not clear enough. Infrastructure changes are less prone to errors when the complete representation of all the relevant resources is in a relational database. Furthermore, debugging for outliers or misconfiguration can be easily done with SQL. Sometimes the issue under the surface is not misconfiguration, but just configuration drift which can happen when a cloud resource has not been updated in a long time or since its creation.

### Type Safety (WIP)

The advent of typed PL have shown the importance of being able to catch a subset of all errors compile-time. IaC tools are akin to scripting languages here since any errors generated in their internal representations DAGs are only surfaced at runtime.

### Backups and disaster recovery

Every production system should to have contingency plans in case issues arise. Cloud outages and human errors can delete or corrupt infrastructure. IaSQL provides a recovery system plan based on up-to-date database backups. It is trivial to apply a snapshot after an outage and re-deploy the entire production infrastructure in a simple step.

(WIP)
In IaSQL, cloud infrastructure is data through a 2-way binding between a cloud account and a PostgreSQL database. Cloud infrastructure declarations are great in theory, but they don't describe what is *actually* in the cloud account. Furthermore, SQL can natively and ergonomically encode relations in a way that most configuration-based syntaxes simply cannot. The ability to represent cloud infrastructure in a PostgreSQL database through a 2-way connection allows making CRUD changes while also tracking changes done elsewhere. SQL is also the lingua franca of data which means that many developers are already familiar with it. All of this opens the door to new opportunities in terms of team collaboration, vendor locking, cost optimization, and disaster recovery strategies.